DROP TABLE IF EXISTS CUSTOMER CASCADE;
CREATE TABLE CUSTOMER (
	ID SERIAL PRIMARY KEY,
	NAME TEXT NOT NULL UNIQUE,
	EMAIL TEXT,
	PASSWORD TEXT NOT NULL
);

INSERT INTO CUSTOMER (NAME, EMAIL, PASSWORD) VALUES ('A', 'A@gmail.com', 'Apass');
INSERT INTO CUSTOMER (NAME, EMAIL, PASSWORD) VALUES ('B', 'B@gmail.com', 'Bpass');



DROP TABLE IF EXISTS PURCHASE CASCADE;
CREATE TABLE PURCHASE (
	ID SERIAL PRIMARY KEY,
	CUSTOMER_ID INT REFERENCES CUSTOMER(ID)
);

INSERT INTO PURCHASE (CUSTOMER_ID) VALUES (1);
INSERT INTO PURCHASE (CUSTOMER_ID) VALUES (2);

DROP TABLE IF EXISTS PRODUCT CASCADE;
CREATE TABLE PRODUCT (
	ID SERIAL PRIMARY KEY,
	NAME TEXT,
	PRICE NUMERIC CHECK (PRICE > 0)
);

INSERT INTO PRODUCT (NAME, PRICE) VALUES ('Product A', 5.5);
INSERT INTO PRODUCT (NAME, PRICE) VALUES ('Product B', 15.5);


DROP TABLE IF EXISTS PURCHASE_PRODUCT;
CREATE TABLE PURCHASE_PRODUCT (
	PURCHASE_ID INT REFERENCES PURCHASE(ID),
	PRODUCT_ID INT REFERENCES PRODUCT(ID),
	QUANTITY INT,

	PRIMARY KEY(PURCHASE_ID, PRODUCT_ID)
);

INSERT INTO PURCHASE_PRODUCT (PURCHASE_ID, PRODUCT_ID, QUANTITY)
VALUES (1, 1, 1);
INSERT INTO PURCHASE_PRODUCT (PURCHASE_ID, PRODUCT_ID, QUANTITY)
VALUES (2, 2, 3);

DROP TABLE IF EXISTS PRODUCT_IMAGE;
CREATE TABLE PRODUCT_IMAGE (
	ID SERIAL PRIMARY KEY,
	FILE_PATH TEXT
);